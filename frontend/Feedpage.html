<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link href="./Feedpage.css" rel="stylesheet">
</head>
  <body>
    <div class=" text-end p-2">
        <a href="./Post.html" class="btn btn-primary  w-20 text-white"> New Post</a>
   <a href="./index.html" class="btn btn-danger  w-20 text-white"> Logout </a>
 
</div>
<div class="allposts ">
    
    <div class="post border  m-auto p-4">
        <h2>
            Page 1
        </h2>
        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Nisi magni assumenda, tempore illum  Lorem ipsum dolor sit amet consectetur adipisicing elit. Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque rerum excepturi incidunt, eveniet suscipit recusandae quibusdam nam, maxime accusantium ratione neque earum. Odit voluptates recusandae est veritatis ea? Maxime, veritatis. Ratione consequatur iure error incidunt, quam voluptates impedit itaque voluptatibus dolore laboriosam. Tempora reiciendis aliquam quos numquam vero? Est, quaerat nostrum. Est!numquam odit a molestiae labore cum nesciunt corporis nam tenetur consequatur totam fuga consequuntur maxime reiciendis quaerat.</p>
      
        <a  class="btn viewpost text-white">View Post</a>
 
    </div>

</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js" integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D" crossorigin="anonymous"></script>
<script>
 
    async function loadUserPosts() {
      const userID = localStorage.getItem('userID');
  
      if (!userID) {
        alert('Please log in first.');
        window.location.href = './index.html';
        return;
      }
  
      try {
        const response = await fetch('http://localhost:5000/getMyPosts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ userID: parseInt(userID) })  // send userID as number
        });
  
        if (!response.ok) {
          throw new Error('Failed to fetch posts');
        }
  
        const posts = await response.json();
  
        const container = document.querySelector('.allposts');
        container.innerHTML = '';
  
        if (posts.length === 0) {
          container.innerHTML = '<p class="text-center">No posts found for this user.</p>';
          return;
        }
  
        posts.forEach(post => {
          container.innerHTML += `
            <div class="post border border-dark m-auto p-4 mb-3">
              <h2>${post.postTitle || 'Untitled'}</h2>
              <p>${post.postDescription || 'No content available.'}</p>
              <a href="./Dedicatedpage.html?postID=${post.ID}" class="btn btn-primary text-white">View Post</a>
            </div>
          `;
        });
  
      } catch (err) {
        console.error(err);
        alert('Error fetching posts');
      }
    }
  //  localStorage.setItem('ID',body.ID)
    window.addEventListener('DOMContentLoaded', loadUserPosts);
  </script>
<!--<script>
  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new URLSearchParams(new FormData(form));
    formData.append('ID',localStorage.getItem('ID'));
    const response = await fetch('http://localhost:5000/getPostID', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: formData
    });
     console.log(response);
     const text= await response.text();
     alert(text);
   /*  if(response.status==200)
     {
      window.location.href="./Feedpage.html";
     }*/
});
</script> -->
  
  


</body>
</html>